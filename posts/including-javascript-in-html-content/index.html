<!DOCTYPE html>
<html lang="en-gb">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.54.0" />

    
    
    

<title>Including JavaScript in HTML content • On Software Development</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Including JavaScript in HTML content"/>
<meta name="twitter:description" content="For the last couple of days, I was struggling with Java ServerFaces. The exact problem was, that commandButtons were working as expected, but commandLinks were not. We are using Apache MyFaces with Tomahawk and Sandbox components. We were going to use commandLinks for navigation and other uses like selecting nodes in Tomahawks&rsquo; tree2 component, but we were forced to render commandButtons instead, which looked quite awkward in some places.
Symptoms we got, were that three browsers: Firefox, Opera and Konqueror, were complaining about &ldquo;oamSubmitForm is not defined&rdquo; after clicking a commandLink."/>

<meta property="og:title" content="Including JavaScript in HTML content" />
<meta property="og:description" content="For the last couple of days, I was struggling with Java ServerFaces. The exact problem was, that commandButtons were working as expected, but commandLinks were not. We are using Apache MyFaces with Tomahawk and Sandbox components. We were going to use commandLinks for navigation and other uses like selecting nodes in Tomahawks&rsquo; tree2 component, but we were forced to render commandButtons instead, which looked quite awkward in some places.
Symptoms we got, were that three browsers: Firefox, Opera and Konqueror, were complaining about &ldquo;oamSubmitForm is not defined&rdquo; after clicking a commandLink." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://bilski.tech/posts/including-javascript-in-html-content/" />
<meta property="article:published_time" content="2009-07-07T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2009-07-07T00:00:00&#43;00:00"/>


    






<link rel="stylesheet" href="/scss/hyde-hyde.1d0509a3f35d4e92d82ebb7d552b74317b2a8464fdbdc9870f522e786bdc5dcf.css" integrity="sha256-HQUJo/NdTpLYLrt9VSt0MXsqhGT9vcmHD1IueGvcXc8=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="http://bilski.tech/">On Software Development</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="http://bilski.tech//img/jacek.jpg" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">On Software Development</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About Me</span>
					</a>
				</li>
			 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/jacek_bilski" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/jacekbilski" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	<a href="https://linkedin.com/in/jacek-bilski" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://www.xing.com/profile/Jacek_Bilski3" rel="me"><i class="fab fa-xing fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
</section>

      </div>
    </div>
    

<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    <article>
  <header>
    <h1>Including JavaScript in HTML content</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Jul 7, 2009
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/javascript">javascript</a>
           
      
          <a class="badge badge-tag" href="/tags/myfaces">myfaces</a>
           
      
          <a class="badge badge-tag" href="/tags/xml">xml</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 2 min read
</div>


  </header>
  
  
  <div class="post">
    <p>For the last couple of days, I was struggling with Java ServerFaces. The exact problem was, that commandButtons were working as expected, but commandLinks were not. We are using Apache MyFaces with Tomahawk and Sandbox components. We were going to use commandLinks for navigation and other uses like selecting nodes in Tomahawks&rsquo; <code>tree2</code> component, but we were forced to render commandButtons instead, which looked quite awkward in some places.</p>

<p>Symptoms we got, were that three browsers: Firefox, Opera and Konqueror, were complaining about &ldquo;oamSubmitForm is not defined&rdquo; after clicking a commandLink. Google wasn&rsquo;t really helpful as it seemed, that no one was ever struggling with that sort of problem. I used Firebug (great Firefox extension for web developers, grab it <a href="http://getfirebug.com/" target="_blank">here</a>) to check what really Firefox was getting from a server and what really was the code it was rendering. And there was something not right, MyFaces rendered JavaScript code, that included &ldquo;oamSubmitForm&rdquo; function, but Firefox couldn&rsquo;t find it. When I looked at what Firefox was really rendering (HTML tab in Firebug), there were two blocks of JavaScript, but both empty. I Googled a little more and stumbled upon some posts regarding JavaScript code included in a page, which content type was <code>application/xhtml+xml</code>. I checked what content type I was getting from my server, and it was <code>text/xml</code>. When I&rsquo;ve added <code>&lt;jsp:directive.page contentType=&quot;text/html; charset=UTF-8&quot;/&gt;</code> to header of my page, suddenly all commandLinks started to work correctly.</p>

<p>What happened? A good practice is that when you include JavaScript code in your HTML page you should use comment out all this code using HTML/XML comments: <code>&lt;!--</code> and <code>--&gt;</code>. That&rsquo;s enough when your content type is not something like <code>text/xml</code>. In that case, you need to write all JavaScript code within CDATA block so it should look like this:</p>

<pre><code>&lt;script type=&quot;text/javascript&quot;&gt;
&lt;[CDATA[
 // your code here
]]&gt;
&lt;/script&gt;
</code></pre>

<p>Apparently, MyFaces doesn&rsquo;t do that. I&rsquo;ll confirm that, and if that&rsquo;s true I&rsquo;ll report a bug and provide a patch. So keep up, I&rsquo;ll tell you when that will happen, and post this patch here also.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/autowiring-ejb-3.0-in-tomcat-from-remote-jboss/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Autowiring EJB 3.0 in Tomcat from remote JBoss</span>
    </a>
    
    
    <a href="/posts/more-on-myfaces-and-contenttype/" class="navigation-next">
      <span class="navigation-tittle">More on MyFaces and ContentType</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    
<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
