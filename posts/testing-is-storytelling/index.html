<!DOCTYPE html>
<html lang="en-gb">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.54.0" />

    
    
    

<title>Testing is storytelling • On Software Development</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Testing is storytelling"/>
<meta name="twitter:description" content="Tests do not only exist to verify the absence of known bugs. They&#39;re also documenting the expected behaviour of a system. Moreover, they&#39;re showing developers how to use code."/>

<meta property="og:title" content="Testing is storytelling" />
<meta property="og:description" content="Tests do not only exist to verify the absence of known bugs. They&#39;re also documenting the expected behaviour of a system. Moreover, they&#39;re showing developers how to use code." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://bilski.tech/posts/testing-is-storytelling/" />
<meta property="article:published_time" content="2018-10-25T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2018-10-25T00:00:00&#43;00:00"/>


    






<link rel="stylesheet" href="/scss/hyde-hyde.1d0509a3f35d4e92d82ebb7d552b74317b2a8464fdbdc9870f522e786bdc5dcf.css" integrity="sha256-HQUJo/NdTpLYLrt9VSt0MXsqhGT9vcmHD1IueGvcXc8=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    

    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="http://bilski.tech/">On Software Development</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="http://bilski.tech//img/jacek.jpg" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">On Software Development</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About Me</span>
					</a>
				</li>
			 
		
		</li>
	</ul>
</div>

        <section class="social">
	
	<a href="https://twitter.com/jacek_bilski" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/jacekbilski" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	<a href="https://linkedin.com/in/jacek-bilski" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	<a href="https://www.xing.com/profile/Jacek_Bilski3" rel="me"><i class="fab fa-xing fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
</section>

      </div>
    </div>
    

<div class="builtwith">
Built with <a href="https://gohugo.io">Hugo</a> ❤️ <a href="https://github.com/htr3n/hyde-hyde">hyde-hyde</a>.
</div>


  </div>
</div>

        <div class="content container">
            
    <article>
  <header>
    <h1>Testing is storytelling</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Oct 25, 2018
    
    
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/programming">programming</a>
           
      
          <a class="badge badge-tag" href="/tags/understanding">understanding</a>
           
      
          <a class="badge badge-tag" href="/tags/testing">testing</a>
           
      
          <a class="badge badge-tag" href="/tags/test-cases">test cases</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 5 min read
</div>


  </header>
  
  
  <div class="post">
    

<p>While working with a customer, I recently saw a test, that looked like this: throw a big XML (&gt;10kB) at a function, get another XML of similar size back and compare it with a pre-recorded one. The test is green if they&rsquo;re equal. I guess, at the very minimum, it serves a purpose of detecting issues. The problem is that it cannot do much more.</p>

<p>What such a test is not providing are hints as to what the problem is when it fails. It could be anything, even XML formatting. If something goes wrong, it can take a few minutes/hours to find out where the differences between the resulting XML and the &ldquo;correct&rdquo; one are, and why the system has created it like this. Then the drilling starts, because the function under test calls other functions, and they again are calling some other functions. In short, the test is not telling me much; the story ends with a simple &ldquo;Houston, we have a problem&rdquo;, not followed by any more details.</p>

<p>I have an issue with such tests, as I am not sure what is really important here. The test will be equally red if the system used tabs instead spaces to indent XML tags, or if it would fail to, for example, create a customer. It seems, that those two things are equally important.</p>

<p>Yet another problem with this test is that it had to run on a pre-populated database, it wasn&rsquo;t creating the data it needed. This makes the test fragile because now it depends on something it cannot control. It also makes it much more difficult to read: we&rsquo;re thrown into the middle of a story,  we don&rsquo;t know what happened so far, thus we might also not understand what is happening right now.</p>

<h3 id="in-a-perfect-world">In a perfect world</h3>

<p>In my perfect (unfortunately, still imaginary) world, each test tells a complete story. First, it prepares the stage, then performs an action, and finally verifies that all the important things are as they should be, may be followed by a clean-up. It shows which requirements need to be met before we do the operation under test, then how to perform it, and at the end what the important outcomes are. After all, our systems are exactly about that, behaviour. When our stakeholders are giving us tasks, they&rsquo;re asking us for software that <em>does</em> foo.</p>

<p>Let&rsquo;s assume that one part of our system is about adding customers. What could our tests look like? From a business perspective, it will probably not contain anything else than providing all the necessary data and asking the system to create a user from this data. Even such a small test already provides information about the minimal set of data that we need to know about a customer. If that was an integration/system/end-to-end test, we could also see how our users need to interact with the system. Such a test already provides several benefits.</p>

<p>If we go to a development level, we&rsquo;re gaining even more. Here, we would probably see how to create a &ldquo;customer&rdquo; object/structure, and how to call the system to add the customer. In the verification phase, we would expect another call to get the newly created customer to verify that it indeed exists. All this would happen on the code level, so the developers could see how to create new objects or call the system. In the setup phase, we could probably see how to put the system together, which collaborators are required in this particular case, where to get them from, and how to bind them. It could even be used as an example to show &ldquo;this is how we do things in here&rdquo; to people joining the project.</p>

<p>More complicated tests add more information. In the case of input validation, for example, we could show from a business perspective what is being validated and how the system responds to invalid requests. From a developer&rsquo;s perspective, such a test could show how the system responds to requests if there&rsquo;s something wrong with them.</p>

<p>If tests are written this way, it would also be far easier to find out what is wrong if a test turns red. If all of a sudden, a test that says &ldquo;customer without an address is invalid&rdquo; fails, we can probably quickly get to a conclusion that something bad happened to our validation logic. Finding the code responsible for this should not be difficult.</p>

<p>Such tests are also valuable in discussions with others because they help to understand the system. It&rsquo;s the idea of ubiquitous language taken from Domain-driven design. If we&rsquo;re talking about a specific system, then no matter who we&rsquo;re talking to, we should be talking about the same things: how the system should behave in certain situations.</p>

<p>In addition, such tests should be more resistant to changes in implementation details. After all, they&rsquo;re more speaking about how the system should behave than anything else. Of course, we can never get rid of all the details. Once we reach the code level, they&rsquo;ll be all over the place, but if we focus on behaviour, we can avoid at least some pitfalls. An example would be testing the database access layer in isolation. This alone doesn&rsquo;t provide any value, we should probably test it together with business logic by, say, calling an API and verifying that the data ended up in the DB.</p>

<p>The list above is by far not complete, such tests can do more. For example, if you feel that writing such tests is difficult or plain impossible, then, maybe you&rsquo;ve just found out that your system is not testable (enough). For example, if you group your tests around concepts or behaviours, it would be easier to find gaps or forgotten requirements.</p>

<h3 id="tl-dr">tl;dr</h3>

<p>Tests are a far more powerful tool than merely a detector of some types of issues. They can – and should – help us understand the system, how it should behave, or which operations are supported. They can also show developers how things are organized in the code, what conventions we follow, how to create, and pass around data or do error handling.</p>

<p>Note, this article was originally posted on <a href="https://www.innoq.com/de/blog/testing-is-storytelling/" target="_blank">INNOQ blog</a>.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/webcalc-iteration-3-formatting-and-cleanup-in-calculator-module/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">WebCalc iteration 3 - formatting and cleanup in calculator module</span>
    </a>
    
    
    <a href="/posts/webcalc-iteration-4-fixes-only/" class="navigation-next">
      <span class="navigation-tittle">WebCalc iteration 4 - fixes only</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    
<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
